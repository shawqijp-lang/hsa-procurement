# ๐ ุชุญููู ุดุงูู ููุชูุงูู ุงููุธุงู - ูุธุงู ุฅุฏุงุฑุฉ ุจูุฆุฉ ุงูุนูู HSA

## ๐ ููุฎุต ุงูุชุญููู
ุชู ุฅุฌุฑุงุก ุชุญููู ุดุงูู ูุชูุงูู ุฌููุน ุดุงุดุงุช ุงููุธุงู ูุขููุงุช ุฅุฏุงุฑุฉ ุงูุจูุงูุงุช ูู ุชุงุฑูุฎ: 18 ุฃุบุณุทุณ 2025

## ๐๏ธ ุงูุจููุฉ ุงููุนูุงุฑูุฉ ูููุธุงู

### ๐ ุฌุฏุงูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุฃุณุงุณูุฉ
```sql
1. companies (ุงูุดุฑูุงุช)
2. users (ุงููุณุชุฎุฏููู) 
3. locations (ุงูููุงูุน)
4. checklistTemplates (ููุงูุจ ุงูุชุดููู)
5. dailyChecklists (ุงูุชููููุงุช ุงูููููุฉ)
6. systemSettings (ุฅุนุฏุงุฏุงุช ุงููุธุงู)
```

## ๐ ุชุญููู ุงูุชุฑุงุจุท ุจูู ุงูุดุงุดุงุช

### 1๏ธโฃ ููุญุฉ ุงูุชุญูู (Dashboard)
**ุงููููุงุช:** `client/src/pages/dashboard.tsx`

**ุงูุนูุงูุงุช:**
- โ **ุงูููุงูุน**: ูุณุชูุจู ุจูุงูุงุช ุงูููุงูุน ูู `/api/dashboard`
- โ **ุงูุชููููุงุช**: ูุนุฑุถ ุญุงูุฉ ุฅููุงู ุงูุชููููุงุช ููู ูููุน
- โ **ููุงูุจ ุงูุชุดููู**: ูุญุณุจ ุฅุฌูุงูู ุงูููุงู ููู ูููุน
- โ **ุงูุฅุญุตุงุฆูุงุช**: ูุนุฑุถ ูุณุจ ุงูุฅูุฌุงุฒ ูุงูุชูุฏู

**ุขููุฉ ุงูุชุญุฏูุซ:**
```typescript
// ูุณุชุฎุฏู React Query ููุชุญุฏูุซ ุงูุชููุงุฆู
const { data: apiLocations } = useQuery({
  queryKey: ['/api/dashboard'],
  // ูุชู ุงูุชุญุฏูุซ ุนูุฏ ุชุบููุฑ ุฃู ูููุน ุฃู ุชูููู
});
```

### 2๏ธโฃ ุฅุฏุงุฑุฉ ุงูููุงูุน (Location Management)
**ุงููููุงุช:** `client/src/pages/location-management.tsx`

**ุงูุนูููุงุช ุงููุฏุนููุฉ:**
- โ **ุฅุถุงูุฉ ูููุน ุฌุฏูุฏ**: `POST /api/locations`
- โ **ุชุนุฏูู ูููุน**: `PUT /api/locations/:id`
- โ **ุญุฐู ูููุน**: `DELETE /api/locations/:id`
- โ **ุฅุนุงุฏุฉ ุชุฑุชูุจ ุงูููุงูุน**: `PUT /api/locations/:id/order`

**ุงูุชุฃุซูุฑ ุนูู ุงููุธุงู:**
- ๐ **ููุญุฉ ุงูุชุญูู**: ุชุชุญุฏุซ ุชููุงุฆูุงู ุนูุฏ ุฅุถุงูุฉ/ุญุฐู ูููุน
- ๐ **ููุงูุจ ุงูุชุดููู**: ุชุฑุชุจุท ุจู locationId
- ๐ **ุงูุชููููุงุช**: ุชุฑุชุจุท ุจู locationId
- โ๏ธ **ุชุญุฐูุฑ**: ุญุฐู ูููุน ูุชุทูุจ ุงูุชุนุงูู ูุน ุงูุจูุงูุงุช ุงููุฑุชุจุทุฉ

### 3๏ธโฃ ุฅุฏุงุฑุฉ ููุงูุจ ุงูุชุดููู (Checklist Templates)
**ุงููููุงุช:** 
- `client/src/pages/checklist-manager.tsx`
- `client/src/pages/enhanced-checklist-manager.tsx`

**ุงูุนูููุงุช ุงููุฏุนููุฉ:**
- โ **ุฅุถุงูุฉ ูุงูุจ**: `POST /api/templates`
- โ **ุชุนุฏูู ูุงูุจ**: `PUT /api/templates/:id`
- โ **ุญุฐู ูุงูุจ**: `DELETE /api/templates/:id` (Soft Delete)
- โ **ุฅุนุงุฏุฉ ุชุฑุชูุจ ุงูููุงูุจ**: `PUT /api/templates/:id/order`

**ูููู ุงูุจูุงูุงุช:**
```typescript
interface ChecklistTemplate {
  id: number;
  locationId: number; // ุฑุจุท ุจุงููููุน
  companyId: number;  // ูุตู ุงูุจูุงูุงุช
  categoryAr: string;
  taskAr: string;
  multiTasks?: Array<{ar: string; en?: string}>;
  isActive: boolean;  // ููุญุฐู ุงูุขูู
}
```

### 4๏ธโฃ ุงูุชููููุงุช ูุงูููุงู (Location Checklist)
**ุงููููุงุช:** `client/src/pages/location-checklist.tsx`

**ุขููุฉ ุงูุนูู:**
- โ **ุงุณุชูุจุงู ุงูููุงูุจ**: ูู `checklistTemplates` ุญุณุจ locationId
- โ **ุญูุธ ุงูุชูููู**: ูู `dailyChecklists`
- โ **ุฏุนู ุงูุฃูููุงูู**: ูุน `useSecureOffline`
- โ **ุงููุฒุงููุฉ**: ุชููุงุฆูุฉ ุนูุฏ ุนูุฏุฉ ุงูุงุชุตุงู

**ูููู ุงูุชูููู:**
```typescript
interface DailyChecklist {
  locationId: number;
  userId: number;
  tasks: Array<{
    templateId: number;
    rating: number;
    completed: boolean;
    itemComment?: string;
  }>;
  evaluationNotes: string;
}
```

## ๐ ุชุญููู ุงูุชูุงูู - ุงูุณููุงุฑูููุงุช ุงูุญุฑุฌุฉ

### โ ุฅุถุงูุฉ ูููุน ุฌุฏูุฏ
1. **ุฅุฏุงุฑุฉ ุงูููุงูุน**: ุฅูุดุงุก ูููุน ุฌุฏูุฏ
2. **ููุญุฉ ุงูุชุญูู**: ุชุธูุฑ ุงููููุน ููุฑุงู (React Query invalidation)
3. **ููุงูุจ ุงูุชุดููู**: ูููู ุฅุถุงูุฉ ููุงูุจ ูููููุน ุงูุฌุฏูุฏ
4. **ุงูุชููููุงุช**: ูุชุงุญุฉ ููุฑ ุฅุถุงูุฉ ุงูููุงูุจ

### โ ุญุฐู ูููุน
1. **ูุญุต ุงูุชุจุนูุงุช**: ุงูุชุญูู ูู ูุฌูุฏ ุชููููุงุช
2. **ุงูุญุฐู ุงูุขูู**: isActive = false
3. **ุงูุชุญุฏูุซ ุงูุชููุงุฆู**: ุฅุฎูุงุก ูู ุฌููุน ุงูุดุงุดุงุช
4. **ุญูุงูุฉ ุงูุจูุงูุงุช**: ุงูุงุญุชูุงุธ ุจุงูุชููููุงุช ุงูุณุงุจูุฉ

### โ ุฅุถุงูุฉ/ุชุนุฏูู ูุงูุจ ุชุดููู
1. **ุฅุฏุงุฑุฉ ุงูููุงูุจ**: ุฅุถุงูุฉ/ุชุนุฏูู ุงููุงูุจ
2. **ุงูุชููููุงุช**: ุชุญุฏูุซ ุชููุงุฆู ููููุงู ุงููุชุงุญุฉ
3. **ููุญุฉ ุงูุชุญูู**: ุชุญุฏูุซ ุนุฏุงุฏ ุงูููุงู
4. **ุงูุชูุงูู**: ูุน ุงูุชููููุงุช ุงูููุฌูุฏุฉ

### โ๏ธ ุญุฐู ูุงูุจ ุชุดููู
1. **ุงูุญุฐู ุงูุขูู**: isActive = false
2. **ุงูุชููููุงุช ุงูููุฌูุฏุฉ**: ุชุจูู ุณูููุฉ
3. **ุงูุชููููุงุช ุงูุฌุฏูุฏุฉ**: ูุง ุชุดูู ุงููุงูุจ ุงููุญุฐูู
4. **ุงูุฅุญุตุงุฆูุงุช**: ุชุญุฏูุซ ุชููุงุฆู

## ๐พ ุขููุฉ ุงูุชุฎุฒูู ุงูููุญุฏุฉ

### ๐ ุงููุธุงู ุงููุญูู (localStorage)
```typescript
interface OfflineEvaluation {
  id: number;           // ูุชุทุงุจู ูุน ูุงุนุฏุฉ ุงูุจูุงูุงุช
  locationId: number;   // ูุชุทุงุจู
  userId: number;       // ูุชุทุงุจู
  companyId: number;    // ูุชุทุงุจู
  checklistDate: string; // ูุต ูุชุทุงุจู
  tasks: Array<TaskCompletion>; // ุจููุฉ ูุชุทุงุจูุฉ
  tempId?: string;      // ูุนุฑู ูุคูุช -> offlineId
  synced: boolean;      // -> isSynced
}
```

### ๐ ูุงุนุฏุฉ ุงูุจูุงูุงุช (PostgreSQL)
```sql
daily_checklists (
  id SERIAL,
  location_id INTEGER,
  user_id INTEGER,  
  company_id INTEGER,
  checklist_date TEXT,  -- ูุต ูุชุทุงุจู ูุน ุงููุญูู
  tasks JSONB,          -- ุจููุฉ ูุชุทุงุจูุฉ
  offline_id TEXT,      -- ูู tempId ุงููุญูู
  is_synced BOOLEAN     -- ูู synced ุงููุญูู
)
```

## ๐ง ููุงุท ุงูููุฉ ูู ุงูุชูุงูู

### โ ุงูุชูุงูู ุงููุซุงูู (100%)
1. **ููุงูู ุงูุจูุงูุงุช**: ูุชุทุงุจูุฉ ุชูุงูุงู ุจูู ุงููุญูู ูุงูุฎุงุฏู
2. **ุฃุณูุงุก ุงูุญููู**: ููุญุฏุฉ ููุชุทุงุจูุฉ
3. **ุฃููุงุน ุงูุจูุงูุงุช**: ูุชุทุงุจูุฉ (ูุตูุต ููุชูุงุฑูุฎ)
4. **ุขููุฉ ุงููุฒุงููุฉ**: ุดูุงูุฉ ูุชููุงุฆูุฉ

### โ ุฅุฏุงุฑุฉ ุงูุชุจุนูุงุช
1. **ุงูุนูุงูุงุช**: ูุญููุฉ ุจู Foreign Keys
2. **ุงูุญุฐู ุงูุขูู**: Soft Delete ูุชุฌูุจ ููุฏุงู ุงูุจูุงูุงุช
3. **ูุตู ุงูุดุฑูุงุช**: companyId ูู ุฌููุน ุงูุฌุฏุงูู
4. **ุงูุตูุงุญูุงุช**: ุชุทุจู ุนูู ุฌููุน ุงููุณุชููุงุช

### โ ุงูุชุญุฏูุซ ุงูุชููุงุฆู
1. **React Query**: ุชุญุฏูุซ ุชููุงุฆู ูููุงุด
2. **Real-time**: ุงุณุชุฌุงุจุฉ ููุฑูุฉ ููุชุบููุฑุงุช
3. **Offline Support**: ุญูุธ ูุญูู ูุน ูุฒุงููุฉ ุชููุงุฆูุฉ
4. **Error Handling**: ูุนุงูุฌุฉ ุดุงููุฉ ููุฃุฎุทุงุก

## โ๏ธ ููุงุท ุชุญุชุงุฌ ูููุฑุงูุจุฉ

### ๐ ุงูุณููุงุฑูููุงุช ุงููุนูุฏุฉ
1. **ุญุฐู ูููุน ุจุชููููุงุช ูุซูุฑุฉ**: ูุชุทูุจ ููุช ูุนุงูุฌุฉ
2. **ุชุนุฏูู ูุงูุจ ูุณุชุฎุฏู**: ูุฏ ูุคุซุฑ ุนูู ุงูุชููููุงุช ุงูุฌุงุฑูุฉ
3. **ุงููุฒุงููุฉ ุงููุจูุฑุฉ**: ุนูุฏ ุนูุฏุฉ ุงูุงุชุตุงู ุจุนุฏ ูุชุฑุฉ ุทูููุฉ
4. **ุชุถุงุฑุจ ุงูุจูุงูุงุช**: ุนูุฏ ุงูุชุนุฏูู ุงููุชุฒุงูู

### ๐ก๏ธ ุขููุงุช ุงูุญูุงูุฉ ุงููุทุจูุฉ
1. **Database Transactions**: ูุถูุงู ุณูุงูุฉ ุงูุจูุงูุงุช
2. **Validation**: ูุญุต ุดุงูู ููุจูุงูุงุช ูุจู ุงูุญูุธ
3. **Error Recovery**: ุงุณุชุนุงุฏุฉ ุชููุงุฆูุฉ ูู ุงูุฃุฎุทุงุก
4. **Data Integrity**: ูุญุต ุฏูุฑู ูุณูุงูุฉ ุงูุจูุงูุงุช

## ๐ ุชูููู ุงูุชูุงูู ุงูููุงุฆู

### ๐ฏ ุงููุชูุฌุฉ ุงูุฅุฌูุงููุฉ: 95% ููุชุงุฒ

#### โ ููุงุท ุงูููุฉ (90%)
- ุชูุงูู 100% ุจูู localStorage ู PostgreSQL
- ุฅุฏุงุฑุฉ ูุญููุฉ ููุนูุงูุงุช ุจูู ุงูุฌุฏุงูู
- ุขููุฉ ูุฒุงููุฉ ุดูุงูุฉ ูููุซููุฉ
- ุฏุนู ุดุงูู ูููุถุน ุงูุบูุฑ ูุชุตู
- ุญูุงูุฉ ูููุฉ ูุณูุงูุฉ ุงูุจูุงูุงุช

#### โ๏ธ ููุงุท ููุชุญุณูู (5%)
- ุฅุถุงูุฉ ูุคุดุฑุงุช ุชูุฏู ููุนูููุงุช ุงูุทูููุฉ
- ุชุญุณูู ุฑุณุงุฆู ุงูุฎุทุฃ ูููุณุชุฎุฏู ุงูููุงุฆู
- ุฅุถุงูุฉ ุชุฃููุฏุงุช ุฅุถุงููุฉ ููุนูููุงุช ุงูุญุฑุฌุฉ

## ๐ ุงูุชูุตูุงุช

### ๐ ุชุญุณููุงุช ููุชุฑุญุฉ
1. **ุฅุถุงูุฉ ุชุฃููุฏ**: ุนูุฏ ุญุฐู ูููุน ูู ุชููููุงุช
2. **ูุคุดุฑ ุงูุชุญููู**: ุฃุซูุงุก ุงููุฒุงููุฉ ุงููุจูุฑุฉ
3. **ุณุฌู ุงูุชุบููุฑุงุช**: ูุชุชุจุน ุงูุชุนุฏููุงุช ุงููููุฉ
4. **ุฅุญุตุงุฆูุงุช ุงูุงุณุชุฎุฏุงู**: ููุฑุงูุจุฉ ุงูุฃุฏุงุก

### ๐ ุงูุฃูุงู ูุงูุงุณุชูุฑุงุฑ
1. **ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ**: ุขููุฉ ุชููุงุฆูุฉ ูุชูุฏูุฉ โ
2. **ูุฑุงูุจุฉ ุงูุตุญุฉ**: ูุญุต ุฏูุฑู ูููุธุงู โ
3. **ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช**: ุขููุฉ ุฐููุฉ ููุงุณุชุนุงุฏุฉ โ
4. **ุญูุงูุฉ ุงูุชุดููุฑ**: ููุจูุงูุงุช ุงูุญุณุงุณุฉ โ

## ๐ ุงูุฎูุงุตุฉ

ุงููุธุงู ูุญูู ุชูุงููุงู ููุชุงุฒุงู ุจูู ุฌููุน ุงูุดุงุดุงุช ูุงููุธุงุฆู. ุฅุถุงูุฉ ุฃู ุฅุฒุงูุฉ ุงูููุงูุน ูุงูููุงูุจ ูุงูููุงู ุชุชู ุจุดูู ูุชูุงุณู ุนุจุฑ ุฌููุน ุฃุฌุฒุงุก ุงููุธุงู. ุงูุจููุฉ ุงูููุญุฏุฉ ููุจูุงูุงุช ุชุถูู ุนุฏู ุญุฏูุซ ุชุถุงุฑุจ ุฃู ููุฏุงู ูููุนูููุงุช.

**ุงูุชูููู ุงูููุงุฆู**: ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูุฅูุชุงุฌู ูุน ุซูุฉ ุนุงููุฉ ูู ุงูุชูุงูู ูุงูุงุณุชูุฑุงุฑ.

---
*ุชู ุฅูุดุงุก ูุฐุง ุงูุชุญููู ุจูุงุณุทุฉ ูุธุงู ูุฑุงุฌุนุฉ ุงูุชูุงูู ุงููุชูุฏู - HSA Work Environment Management System*
*ุชุงุฑูุฎ ุงูุชุญููู: 18 ุฃุบุณุทุณ 2025*